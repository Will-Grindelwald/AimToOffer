package in.action.day831.meituan;

import java.util.Scanner;

/**
 * 
 * åºåˆ—ä¸­ä»»æ„ä¸ªè¿ç»­çš„å…ƒç´ ç»„æˆçš„å­åºåˆ—ç§°ä¸ºè¯¥åºåˆ—çš„å­ä¸²ã€‚ ç°åœ¨ç»™ä½ ä¸€ä¸ªåºåˆ— P å’Œä¸€ä¸ªæ•´æ•° Kï¼Œè¯¢é—®å…ƒç´ å’Œæ˜¯ K çš„å€æ•°çš„å­ä¸²çš„æœ€å¤§é•¿åº¦ã€‚
 * æ¯”å¦‚åºåˆ—ã€1,2,3,4,5ã€‘ï¼Œç»™å®šçš„æ•´æ•° K ä¸º 5ï¼Œå…¶ä¸­æ»¡è¶³æ¡ä»¶çš„å­ä¸²ä¸º {5}ã€{2,3}ã€{1,2,3,4}ã€{1,2,3,4,5}ï¼Œ
 * é‚£ä¹ˆç­”æ¡ˆå°±ä¸º 5ï¼Œå› ä¸ºæœ€é•¿çš„å­ä¸²ä¸º {1,2,3,4,5}ï¼›å¦‚æœæ»¡è¶³æ¡ä»¶çš„å­ä¸²ä¸å­˜åœ¨ï¼Œå°±è¾“å‡º 0ã€‚
 * 
 * è¾“å…¥ ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° N, 1 â‰¤ ğ‘ â‰¤ 105 ã€‚ ç¬¬äºŒè¡ŒåŒ…å« N ä¸ªæ•´æ•°ğ‘ğ‘– ï¼Œğ‘ğ‘– è¡¨ç¤ºåºåˆ— P ç¬¬ i ä¸ªå…ƒç´ çš„å€¼ã€‚0 â‰¤
 * ğ‘ğ‘– â‰¤ 105 ã€‚ ç¬¬ä¸‰è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° Kï¼Œ 1 â‰¤ ğ¾ â‰¤ 105 ã€‚
 * 
 * è¾“å‡º è¾“å‡ºä¸€ä¸ªæ•´æ•° ANSï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚
 * 
 */
// æ ·ä¾‹è¾“å…¥
// Input Sample 1
// 5
// 1 2 3 4 5
// 5
// Input Sample 2
// 6
// 3 1 2 7 7 7
// 4
// æ ·ä¾‹è¾“å‡º
// Output Sample 1
// 5
// Output Sample 2
// 5
public class T1HARD {
	public static void main(String[] args) {
		int n = 0, k = 0;
		int[] arr = null;
		try (Scanner in = new Scanner(System.in)) {
			n = in.nextInt();
			arr = new int[n];
			for (int i = 0; i < n; i++) {
				arr[i] = in.nextInt();
			}
			k = in.nextInt();
		}

		// æš´åŠ›è§£æ³•
		// æ„Ÿè§‰ä¼šæœ‰æ›´ä¼˜çš„è§£æ³•
		int sum = 0, max = 0;
		for (int i = 0; i < arr.length; i++) {
			if (arr.length - i < max) { // ä¼˜åŒ–ç‚¹ï¼Œä¸ä¼˜åŒ–åˆ™æœ‰ç”¨ä¾‹æ—¶é—´è¶…é™
				break;
			}
			sum = 0;
			for (int j = i; j < arr.length; j++) {
				sum += arr[j];
				if (sum % k == 0 && max < (j - i + 1)) {
					max = j - i + 1;
					sum = 0;
				}
			}
		}
		System.out.println(max);
	}
}
